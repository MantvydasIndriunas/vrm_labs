[gd_scene load_steps=15 format=3 uid="uid://cy11f1onaggd3"]

[ext_resource type="Script" uid="uid://wbxcurbt8o30" path="res://assets/scripts/player/player_controller.gd" id="1_23doe"]
[ext_resource type="Script" uid="uid://bdynx2nyfmwgb" path="res://assets/scripts/player/camera_controller.gd" id="2_6ev1f"]
[ext_resource type="Script" uid="uid://c0ca2wbw4hcmr" path="res://assets/scripts/player/components/mouse_capture.gd" id="3_08ru5"]
[ext_resource type="Script" uid="uid://couw105c3bde4" path="res://addons/godot_state_charts/state_chart.gd" id="4_tfrk6"]
[ext_resource type="Script" uid="uid://c1vp0ojjvaby1" path="res://addons/godot_state_charts/parallel_state.gd" id="5_wtdo7"]
[ext_resource type="Script" uid="uid://jk2jm1g6q853" path="res://addons/godot_state_charts/compound_state.gd" id="6_jsc2v"]
[ext_resource type="Script" uid="uid://cytafq8i1y8qm" path="res://addons/godot_state_charts/atomic_state.gd" id="7_lk8tp"]
[ext_resource type="Script" uid="uid://cf1nsco3w0mf6" path="res://addons/godot_state_charts/transition.gd" id="8_8mr67"]
[ext_resource type="Script" uid="uid://dv032sqfjwuwr" path="res://assets/scripts/player/components/state_machine.gd" id="9_jsc2v"]
[ext_resource type="Script" uid="uid://dkk48pifuomm5" path="res://assets/scripts/player/states/base_state.gd" id="10_8mr67"]
[ext_resource type="Script" uid="uid://ci8axn7a27a6p" path="res://assets/scripts/player/states/idle_state.gd" id="10_lk8tp"]
[ext_resource type="PackedScene" uid="uid://bcwkugn6v3oy7" path="res://addons/godot_state_charts/utilities/state_chart_debugger.tscn" id="12_8mr67"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_w72pk"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_ut5yj"]

[node name="CharacterBody3D" type="CharacterBody3D" node_paths=PackedStringArray("camera", "state_chart", "standing_collision")]
script = ExtResource("1_23doe")
camera = NodePath("CameraController")
state_chart = NodePath("StateChart")
standing_collision = NodePath("StandingCollision")

[node name="PlaceholderMesh" type="MeshInstance3D" parent="."]
mesh = SubResource("CapsuleMesh_w72pk")

[node name="StandingCollision" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_ut5yj")

[node name="CameraController" type="Node3D" parent="." node_paths=PackedStringArray("player_controller", "component_mouse_capture")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
script = ExtResource("2_6ev1f")
player_controller = NodePath("..")
component_mouse_capture = NodePath("../Components/MouseCapture")

[node name="Camera3D" type="Camera3D" parent="CameraController"]

[node name="Components" type="Node" parent="."]

[node name="MouseCapture" type="Node" parent="Components" node_paths=PackedStringArray("camera_controller")]
script = ExtResource("3_08ru5")
debug = true
camera_controller = NodePath("../../CameraController")

[node name="StateChart" type="Node" parent="."]
script = ExtResource("4_tfrk6")
metadata/_custom_type_script = "uid://couw105c3bde4"

[node name="Root" type="Node" parent="StateChart"]
script = ExtResource("5_wtdo7")
metadata/_custom_type_script = "uid://c1vp0ojjvaby1"

[node name="Movement" type="Node" parent="StateChart/Root"]
script = ExtResource("6_jsc2v")
initial_state = NodePath("Grounded")
metadata/_custom_type_script = "uid://jk2jm1g6q853"

[node name="Grounded" type="Node" parent="StateChart/Root/Movement"]
script = ExtResource("6_jsc2v")
initial_state = NodePath("Idle")
metadata/_custom_type_script = "uid://jk2jm1g6q853"

[node name="Idle" type="Node" parent="StateChart/Root/Movement/Grounded"]
script = ExtResource("7_lk8tp")
metadata/_custom_type_script = "uid://cytafq8i1y8qm"

[node name="OnMoving" type="Node" parent="StateChart/Root/Movement/Grounded/Idle"]
script = ExtResource("8_8mr67")
to = NodePath("../../Moving")
event = &"onMoving"
delay_in_seconds = "0.0"
metadata/_custom_type_script = "uid://cf1nsco3w0mf6"

[node name="Moving" type="Node" parent="StateChart/Root/Movement/Grounded"]
script = ExtResource("6_jsc2v")
initial_state = NodePath("Walking")
metadata/_custom_type_script = "uid://jk2jm1g6q853"

[node name="Walking" type="Node" parent="StateChart/Root/Movement/Grounded/Moving"]
script = ExtResource("7_lk8tp")
metadata/_custom_type_script = "uid://cytafq8i1y8qm"

[node name="Sprinting" type="Node" parent="StateChart/Root/Movement/Grounded/Moving"]
script = ExtResource("7_lk8tp")
metadata/_custom_type_script = "uid://cytafq8i1y8qm"

[node name="Airborne" type="Node" parent="StateChart/Root/Movement"]
script = ExtResource("6_jsc2v")
metadata/_custom_type_script = "uid://jk2jm1g6q853"

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("player_controller")]
script = ExtResource("9_jsc2v")
player_controller = NodePath("..")

[node name="MovementState" type="Node" parent="StateMachine"]
script = ExtResource("10_8mr67")

[node name="GroundedState" type="Node" parent="StateMachine/MovementState"]

[node name="IdleState" type="Node" parent="StateMachine/MovementState/GroundedState"]
script = ExtResource("10_lk8tp")

[node name="MovingState" type="Node" parent="StateMachine/MovementState/GroundedState"]

[node name="WalkingState" type="Node" parent="StateMachine/MovementState/GroundedState/MovingState"]

[node name="SprintingState" type="Node" parent="StateMachine/MovementState/GroundedState/MovingState"]

[node name="AirborneState" type="Node" parent="StateMachine/MovementState"]

[node name="StateChartDebugger" parent="." instance=ExtResource("12_8mr67")]
anchors_preset = 0
anchor_right = 0.0
anchor_bottom = 0.0
offset_right = 18.0
offset_bottom = 50.0
grow_horizontal = 1
grow_vertical = 1
initial_node_to_watch = NodePath("../StateChart")

[connection signal="state_physics_processing" from="StateChart/Root/Movement/Grounded/Idle" to="StateMachine/MovementState/GroundedState/IdleState" method="_on_idle_state_physics_processing"]
